---
title: "型を意識したPythonのすすめ 第0回"
emoji: "👀"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: [python]
published: true
---
# はじめに
お仕事でPythonを書いて1年くらい経ちました。
(Python自体はもう少しやっています。)

結構カッチリルールを決めてプログラムを書いていく現場に当たったこともあり、型ヒントやmypyを使ってPythonらしからぬ型チェックを強制しています。

型を意識しなくとも気軽に使えることが利点のPythonで、わざわざ型を意識したコーディングをする理由とはなんでしょうか？

この疑問の答えを探しつつ、**やっぱりPythonでも型の意識は大事だよね** と共感していただけたらと思い、少しずつ記事を書いていこうかと腰を上げた次第です。

#### おことわり
本記事と関連する記事は、あくまで個人の意見を交えつつ、型ヒントについてゆるりと紹介していくものになります。そのため、厳密さに欠けた表現をすることがあります。

また、Pythonは高い頻度で更新される言語でありますゆえ、情報が古かったり、誤った記載をしてしまう可能性は大いにあります。

ご了承ください

# プロローグ：型ヒント
[typing](https://docs.python.org/ja/3/library/typing.html) つまり 型ヒントは、Python 3.5にて追加された機能になります。昨日とは言いますが、結局のところPythonの1モジュールに過ぎません。そのため、インタプリタ的に型チェックができる訳ではないです。
**単なるヒント** という立ち位置で、型情報をプログラマやサードパーティーモジュールに提供しています。

このようなPythonの関数があったとします。
```py
def add_number(num1, num2):
    sum = num1 + num2
    return sum
```
2つの数字を足して、その結果を返すだけの簡単な関数です。

![Alt text](/images/t_p_n0_img1.png)
(ありえないですが)関数名と、エディタ上でこんな情報が与えられているとして、対話モードで実行したと仮定した以下の例をお読みください。

例1)
```py
>>> add_number(1, 2)
3
```
Aさん「整数を2つ与えたら、足し算された結果が整数で貰える関数だな。」

例2)
```py
>>> add_number(1.0, 2)
3.0
```
Bさん「両方とも数っちゃ数だけど、どっちかに小数を入れたら、足し算された結果が小数で返ってくるっぽい！」

例3)
```py
>>> add_number("1", "2")
'12'
```
Cさん「文字列で数を入れると結合できそうかな...？」

他にも色々解釈できますが、実装者は何を考えて、何を期待してこの関数を作ったのでしょうか。
使用者に判断を委ねてしまっては、好き勝手な使われ方をされてしまい、バグの素になりかねません。

そこで、先ほどのadd_number関数を次のように修正しました。
```py
def add_number(num1: int, num2: int) -> int:
    sum = num1 + num2
    return sum
```

すると、エディタ上では
![Alt text](/images/t_p_n0_img2.png)
引数はint型ですよ。返り値はint型ですよ。と教えてくれるようになります。
この情報が与えられれば、少なくとも3番目の例のように文字列を与えることは無くなるのではないでしょうか。
型を(見た目上)縛ることで、実装者の意図した通りに使われる確立を上げることができ、単純なバグを減らすことに貢献できるのです。

※あくまでもヒント扱いであるため、普通に文字列を突っ込むことはできます。


# おわりに
今回挙げた例は簡易的なものですが、型ヒントがあるとなんか良さそう程度には思えていただけたでしょうか。ざっくりとでもイメージをつかめていただけたら幸いです。

いつになるか分かりませんが、次回は型ヒントの書き方あたりを嚙み砕いて記事にできたらと考えています。

ここまでお読みいただきありがとうございました。

## 参考文献
- [typing --- 型ヒントのサポート](https://docs.python.org/ja/3/library/typing.html)
- [PEP 483 – The Theory of Type Hints](https://peps.python.org/pep-0483/)